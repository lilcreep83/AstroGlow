<style>
    body {
        background-image: url('https://www.thoughtco.com/thmb/2aSpUkz-OuXmYb9Ha10b4oBxz44=/3728x3728/filters:fill(auto,1)/moon_phases-58b84a765f9b5880809d8d4d.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
    }
    #moon-container {
        background: rgba(255,255,255,0.85);
        border-radius: 10px;
        padding: 20px;
        max-width: 400px;
        margin: 40px auto;
        box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }
</style>
<div id="moon-container">
<h1>Moon Phase Calculator ðŸŒ™</h1>
<p>Enter a date to find the moon's phase:</p>
<input type="date" id="dateInput">
<button onclick="calculateMoonPhase()">Calculate</button>
<p id="result"></p>
</div>

<script>
    function calculateMoonPhase() {
    // Debug element removed
        try {
            const dateInput = document.getElementById('dateInput').value;
            const resultElement = document.getElementById('result');



            if (!dateInput) {
                resultElement.textContent = 'Please enter a date.';

                return;
            }

            const date = new Date(dateInput);
            const year = date.getFullYear();
            const month = date.getMonth() + 1; // Convert to 1-based month for JDN formula
            const day = date.getDate();



            const a = Math.floor((14 - month) / 12);
            const y = year + 4800 - a;
            const m = month + 12 * a - 3; // Adjusted for 1-based month
            const jdn = day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;



            const knownNewMoonJdn = 2451549.5;
            const synodicMonth = 29.53058867;

            const moonAge = (jdn - knownNewMoonJdn) % synodicMonth;


            const phases = [
                'New Moon ðŸŒ‘',
                'Waxing Crescent ðŸŒ’',
                'First Quarter ðŸŒ“',
                'Waxing Gibbous ðŸŒ”',
                'Full Moon ðŸŒ•',
                'Waning Gibbous ðŸŒ–',
                'Last Quarter ðŸŒ—',
                'Waning Crescent ðŸŒ˜'
            ];

            let phaseName = '';

            if (moonAge >= 27.5 || moonAge < 1.5) {
                phaseName = phases[0];
            } else if (moonAge < 6.5) {
                phaseName = phases[1];
            } else if (moonAge < 8.5) {
                phaseName = phases[2];
            } else if (moonAge < 13.5) {
                phaseName = phases[3];
            } else if (moonAge < 16.5) {
                phaseName = phases[4];
            } else if (moonAge < 20.5) {
                phaseName = phases[5];
            } else if (moonAge < 23.5) {
                phaseName = phases[6];
            } else {
                phaseName = phases[7];
            }

            resultElement.textContent = `The moon phase on this date is: ${phaseName}`;

        } catch (error) {
            console.error('Error in calculateMoonPhase:', error);
            const resultElement = document.getElementById('result');
            resultElement.textContent = 'An error occurred. Check the console for details.';

        }
    }
</script>